\chapter{Kombinatorika}
\thispagestyle{empty}

\section{Matematiniai žaidimai}

Šiame skyriuje nagrinėsime dviejų žaidėjų matematinius žaidimus.
Dažniausiai pasitaikanti tokių uždavinių sprendimo strategija yra visų
galimų žaidimo pozicijų aibės padalinimas į dvi dalis, vadinamas laiminčiosiomis
pozicijomis ir pralaiminčiosiomis pozicijomis. Žaidėjas, būdamas
laiminčiojoje pozicijoje visuomet gali paeiti taip, kad varžovas atsidurtų
pralaiminčioje pozicijoje. Šis, savo ruožtu, yra pasmerktas po bet kurio
ėjimo pastatyti varžovą į laiminčiąją. Laiminčiosioms pozijoms, žinoma,
turi priklausyti ir žaidimą pergale užbaigiančios pozicijos, ar bent jau (jei
žaidžiama iki kol kuris nors žaidėjas nebegalės padaryti ėjimo) jos turi
garantuoti, kad žaidėjas ėjimą padaryti visuomet galės. 


\subsubsection{Pavyzdžiai apšilimui}

\begin{pavnr}
  Ant stalo yra $n$ akmenukų. Žaidėjas gali nuimti bet kokį akmenukų skaičių
  ne didesnį už $k$. Žaidėjai $A$ ir $B$ ėjimus atlieka pakaitomis, pradeda $A$.
  Laimi tas žaidėjas, kuris nuimą paskutinį akmenuką. Kuris žaidėjas laimės
  su atitinkamais $n$?
  \label{n/kakmenukų}
\end{pavnr}

\begin{sprendimas}
Jei  $n<k+1$, tada laimės $A$ nuimdamas visus akmenukus, tai yra laiminčios pozicijos (pozicijos, kuriose pradėjęs žaidimą ir žaisdamas protingai tikrai laimėsi). Jei $n=k+1$, tai $A$ negali nuimti visų akmenukų, B savo ėjimu galės tai padaryti ir laimės
žaidimą, tai yra pralaiminti pozicija. $k+1$ yra svarbus skaičius dėl to, kad vieno ėjimo metu visų akmenukų paimti negali, o dviem ėjimais tai visada galėsi padaryti. Jei akmenukų skaičius yra $k+1$ kartotinis, tai A savo ėjimo metu negali pasiekti
kito kartotinio, B savuoju jau galės tai padaryti. Nulis yra $k+1$ kartotinis, tad galiausiai jis atsidurs A rankose, žaidimą laimės B. 

\end{sprendimas}
Šiame pavyzdyje visi galimi akmenukų kiekiai
padalinami į dvi grupes. Pirmojoje grupėje yra $k+1$ kartotiniai (1),
antrojoje – likę skaičiai (2). Iš (2) visada galima patekti į (1), o bet
koks ėjimas iš (1) veda į (2). 

\begin{pavnr}
  Ant stalo yra $n$ akmenukų. Žaidėjas gali pašalinti $2^{m}$ akmenukų, kur
  $m$ yra sveikasis neneigiamas skaičius. Kuris žaidėjas laimės dabar?
\end{pavnr}

\begin{sprendimas}
  Jei $n \equiv 1 \pmod{3}$ arba $n \equiv 2 \pmod{3}$, tai $A$ pašalindamas
  atitinkamai $1$ arba $2$ akmenukus gaus skaičių dalų iš trijų, o antrasis
  žaidėjas, negalėdamas atimti trejeto kartotinio, gaus nedalų iš trijų.
  Kadangi $0$ yra dalus iš trijų, tai žaidimą laimės $A$. Jei $n \equiv 0
  \pmod{3}$, žaidimą laimi $B$.
\end{sprendimas}

Šiame pavyzdyje vėl visi galimi akmenukų kiekiai padalinami į dvi grupes.
Pirmojoje grupėje yra $3$ kartotiniai (1), antrojoje – likę skaičiai (2).
Iš (2) visada galima patekti į (1), o bet koks ėjimas iš (1) veda į (2).

\begin{pavnr}
  Ant stalo yra $n$ akmenukų. Žaidėjas gali pašalinti bet kokį pirminį skaičių
  arba vieną akmenuką. Kaip žaidimas vyks dabar?
\end{pavnr}

\begin{sprendimas}
  Jei $n$ nėra keturių kartotinis, tai laimi pirmasis žaidėjas, visuomet nuimdamas tiek
  akmenukų, kad gautų keturių kartotinį. Jei $n$ yra keturių kartotinis, laimi
  antrasis žaidėjas. 
\end{sprendimas}

\begin{pavnr}
  Ant stalo yra $n$ akmenukų. Žaidėjas gali pašalinti $p^n$ akmenukų, kur
  $p$ bet koks pirminis, o $n$ neneigiamas sveikasis  skaičius. Kaip
  žaidimas vyks dabar?  
\end{pavnr}

\begin{sprendimas}
  $6$ yra mažiausias skaičius, kuris nėra pirminio skaičiaus laipsnis. Jei $n$
  yra nedalus iš šešių, tada $A$ gali jį padaryti tokį ir taip užsitikrinti,
  kad pats negaus šešių kartotinio. $A$ laimės žaidimą. Jei $n$ yra šešių
  kartotinis, panašiai žaisdamas laimi $B$.
\end{sprendimas}

Jei žaidėjas $A$ VISADA gali atlikti tokį ėjimą, po kurio $B$ negali vienu
ėjimu laimėti žaidimo, tai $B$ NIEKADA ir nelaimės. Jei žaidimas kada nors
baigsis, tai pergalę švęs $A$. 

\subsubsection{Simetrija}

Dažnai pasitaikanti strategija olimpiadiniuose uždaviniuose yra simetrija.
Jei žaidimo laukas turi simetrijos ašį ar centrą, žaidėjas gali suskirstyti
visą lauką į simetriškų ėjimų poras. Žaidėjui $A$ atlikus vieną ėjimą iš šios
poros, žaidėjui $B$ tereikia atlikti antrąjį -- taip jis užsitikrina, kad po
kiekvieno priešininko ėjimo jis galės atlikti dar bent vieną ėjimą.
Pavyzdžiui:

\begin{pavnr}
  Žaidėjai $A$ ir $B$ stačiakampėje lentelėje $ 2\times n$ paeiliui spalvina po
  vieną langelį arba du bendrą sieną turinčius langelius. Nuspalvinto
  langelio spalvinti nebegalima. Pralaimi tas žaidėjas, kuris nebegali
  atlikti ėjimo. Nurodykite, kuris žaidėjas turės laiminčią strategiją su
  atitinkamais $n$. 
\end{pavnr}

\begin{sprendimas}
  Kai $n$ yra nelyginis, tai $A$ pirmu ėjimu spalvina du centrinius
  langelius. Šie langeliai tampa lentos simetrijos ašimi. Kiekvienas lentelės
  langelis turi sau simetrišką, jie yra suskirstyti į poras. Dabar po bet
  kurio $B$ ėjimo $A$ galės atlikti simetrišką ėjimą centrinių langelių
  atžvilgiu. $A$ žaidėjas niekada nepralaimės. Kadangi langelių skaičius
  baigtinis ir kiekvienu ėjimu sumažėja, tad žaidimas yra baigtinis. Iš šių
  dviejų teiginių seka, kad pirmasis žaidėjas turi laiminčiąją strategiją. 

  Kai $n$ yra lyginis, tada, kad ir kokį ėjimą atliktų $A$, $B$ galės atlikti
  simetrišką ėjimą lentelės centro atžvilgiu. Kadangi žaidimas baigtinis,
  $B$ turės laiminčiąją strategiją. 
\end{sprendimas}

\begin{pavnr}
  Žaidimo erdvė yra apvalus stalas. Žaidėjai $A$ ir $B$ pakaitomis deda
  identiškas monetas ant stalo. Monetos negali persidengti. Pralaimi
  žaidėjas, kuris nebegali atlikti ėjimo. Įrodykite, kad žaidimą laimės $A$. 
\end{pavnr}

\begin{sprendimas}
Pirmu ėjimu $A$ deda monetą taip, kad jos centras sutaptų su stalo centru, o
vėliau deda monetas simetriškai $B$ padėtoms centrinės monetos atžvilgiu. Pirmasis žaidėjas tikrai galės laimėti
dėl to, kad stalas turi simetricos centrą taško atžvilgiu. Prieš miegą sugalvokite kaip galima sukonstruoti visas taškų aibes plokštumoje, kurių simetrijos centras būtų kordinačių pradžia.    
\end{sprendimas}


\begin{pavnr}
  Apskritime pažymėta $n$ taškų, iš eilės sunumeruotų skaičiais $1,2,\ldots,n$. Šis
  apskritimas yra žaidimo $A(n)$ erdvė. Du žaidėjai $P$ ir $L$ paeiliui brėžia po
  stygą, jungiančią du taškus, kurių numeriai yra vienodo lyginumo. Pradeda
  $P$. Leidžiama jungti tik taškus, kurie nėra sujungti su nė vienu kitu.
  Nubrėžtos stygos negali kirstis. Pralaimi tas žaidėjas, kuris negali
  atlikti ėjimo. Kuris žaidėjas laimi su atitinkamais $n$?
\end{pavnr}

\begin{sprendimas}
  Jeigu iškart nesimato, kaip spręsti uždavinį, pravartu pabandyti
  paprastesnius atvejus. Lengva suprasti, kad žaidimus $A(1)$ ir $A(2)$
  žaidėjas $P$ pralaimi, žaidimus $A(3)$ ir $A(4)$ – laimi. Žaidimą $A(5)$
  laimi $P$ sujungdamas $1$ ir $3$ taškus. 

  Galime įsivaizduoti, kad taškai (nekeičiant jų tarpusavio padėties) yra
  išdėlioti taisyklingojo $n$-kampio viršūnėse; tai žaidimo eigai ir baigčiai
  įtakos neturi.

  Nagrinėsime žaidimus $A(n)$, kai $n=4k$. Parodysime, kad juos laimi $P$.
  Apskritimo taškai, priklausantys vienam skersmeniui, yra vadinami
  diametraliai priešingais. Šiuo atveju visų diametraliai priešingų taškų
  lyginumas yra vienodas. Pirmo ėjimo metu $P$ tereikia sujungti bet kuriuos
  diametraliai priešingus taškus. Nubrėžtas skersmuo tampa apskritimo
  simetrijos ašimi. Kiekvienas taškas turi sau simetrišką šio skersmens
  atžvilgiu. Suskirstę simetriškus taškus į poras pastebime, kad $L$ negali
  brėžti stygos iš karto per du vienos poros taškus, kitaip ši kirstų
  simetrijos ašį. Į kiekvieną $L$ nubrėžtą stygą $P$ atsako simetriška šiai
  skersmens atžvilgiu. Parodysime, kad jis visada galės tai padaryti. $P$
  taktika garantuoja, kad po kiekvieno jo ėjimo arba abu poros taškai yra
  laisvi arba per abu eina po stygą (1). Tarkime, kad $L$ sujungia taškus $A$
  ir $B$, jiems simetriški atitnkamai yra $C$ ir $D$ (jie yra tikrai laisvi
  pagal (1)).  Tarkime, kad $P$ negali sujungti taškų $C$ ir $D$, tada tarp
  jų yra taškas $E$ ir styga $CD$ kerta stygą $EF$. Bet jau yra nubrėžta
  styga, simetriška $CF$ (1), o ši kerta $AB$. Gavome prieštarą. Žaidimą
  laimi $P$. 

  Kai $n=4k+2$, laimi $L$. Dabar diametraliai priešingų taškų lyginumas yra
  skirtingas. $L$ suskirsto diametraliai priešingus taškus į poras. Jei $P$
  brėžia stygą per $A$ ir $B$, tai $L$ atsako styga einančia per diametraliai šiems
  priešingus taškus $C$ ir $D$. $P$ negali brėžti stygos per abu poros taškus, nes šių
  lyginumas skiriasi. $L$ strategija garantuoja, kad po kiekvieno jo ėjimo arba
  abu poros taškai yra panaudoti arba abu yra laisvi (1). Tarkime, kad ši
  strategija negarantuoja $L$ pergalės. $P$ paskutiniu ėjimu brėžia stygą per
  $A$ ir $B$, $C$ ir $D$ yra šiems diametraliai priešingi ir jie abu
  yra laisvi pagal (1). Vadinasi tarp jų yra taškas $E$, o styga $EF$ kerta $CD$.
  Bet jau yra nubrėžta styga per tašką diametraliai priešingą $E$ (1) ir ji
  kerta tiesę $AB$. Prieštara. $P$ bus žaidėjas, kuriam pirmajam pritrūks ėjimų.
  Laimės $L$.

  Kai $n=4k+1$, laimi $P$. Savo pirmu ėjimu jis sujungia $n$ ir $n-2$. Kartu
  iš tolimesnio žaidimo iškrinta taškas $n-1$. Viso lieka $4k+1-3=4(k-1)+2$
  taškų, o šį atvejį jau išnagrinėjome aukščiau. 

  Kai $n=4k+3$, laimi $P$. Savo pirmuoju ėjimu jis sujungia $2k+1$ ir $2k+3$,
  kartu iš žaidimo iškrinta $2k+2$. Lieka $4k$ taškų, tarp kurių negalima
  nubrėžti nė vieno skersmens, tad žaidžiama kaip atveju su $4k+2$ taškų. 
\end{sprendimas}

\begin{pavnr}{(Leningradas 1989)}
  Du žaidėjai $A$ ir $B$ žaidžia žaidimą ant $10\times 10$ lentos. Žaidėjas
  gali įrašyti pliusą arba minusą į tuščią lentelės langelį. Pradeda $A$.
  Jeigu po žaidėjo ėjimo atsiranda trys iš eilės einantys langeliai
  (horizontaliai, vertikaliai arba įstrižai) su vienodais ženklais,
  žaidėjas laimi. Ar kuris nors žaidėjas turi laiminčiąją strategiją? Jei
  taip, tai kuris?
\end{pavnr}

\begin{sprendimas}
  $B$ turi laiminčiąją strategiją. Jeigu jis gali vienu ėjimu laimėti, tai jis
  nesivaržydamas  tai padarys. Kitu atveju jis įrašo priešingą ženklą padėtam
  $A$ į simetrišką langelį centro atžvilgiu. Nesunku įsitikinti, kad taip
  žaidžiant $A$ žaidėjas niekada negalės laimėti. Belieka
  įrodyti, kad $B$ tai galės padaryti visada. Nagrinėkime centrinį kvadratą
  $4\times 4$ po to, kai $A$ į centrinį $2\times 2$ įrašė antrąjį savo
  ženklą. Dabar jame greta yra įrašyti du vienodi ženklai. Turėdami omenyje,
  kad $A$ negali laimėti šio žaidimo, nesunkiai galime parodyti, kad $B$ visada
  laimės. Pabandykite tai padaryti patys.  
\end{sprendimas}

\subsubsection{Netiesioginiai sprendimai (angl. \emph{non-constructive solutions})}

Nagrinėtuose uždaviniuose mes pateikėme strategijas, kuriomis
vadovaudamasis $A$ arba $B$ visada galės laimėti žaidimą. Tačiau kartais tai
daryti yra visai nebūtina. Jei klausiama, ar žaidėjas $A$ visada gali
laimėti, neprivalome nurodyti būdo, kaip $A$ tai gali padaryti. Užtenka
parodyti, kad $A$ galiausiai pasieks pergalę. Tokie sprendimai, nesiūlantys
algoritmo pergalei pasiekti, vadinami netiesioginiais sprendimais. 

\begin{pavnr}
  Žaidėjai $A$ ir $B$ pakaitomis lentoje rašo sveikuosius teigiamus skaičius
  ne didesnius už $p$. Draudžiama rašyti skaičius, kurie dalija nors vieną iš
  jau užrašytų. Pralaimi tas, kuris nebegali atlikti ėjimo. Kas laimi atveju
  $p=10$? $p=1000$?
\end{pavnr}

\begin{sprendimas}
  Abiem atvejais laimi $A$. Pirmuoju atveju uždavinį nesudėtinga išspręsti
  ir tiesiogiai: $A$ užrašo $6$. Tada $B$ gali rašyti tik skaičius iš porų
  $(4,5)$, $(10,8)$, $(9,7)$ ir $A$ visada gali užrašyti antrąjį skaičių iš
  tos poros. Išspręskime šį uždavinį netiesiogiai:

  Pastebėkime, kad vienas skaičius čia ypatingas. Tai yra
  $1$. $B$ niekada negali jo parašyti, tai gali atlikti tik $A$ ir tik
  pirmuoju ėjimu. Nagrinėkime tokį žaidimą (1), kuriame $A$ pirmo ėjimo metu
  neparašo vieneto. Jei šiame žaidime jis turi laiminčiąją strategiją, tai
  mūsų darbas jau baigtas, tad tarkime, kad $A$ tokį žaidimą visada pralaimi.
  Kas vyksta jei $A$ pirmo ėjimo metu parašo vienetą (2)? Tada žaidimas virsta
  (1), tik čia jau $B$ yra pirmasis žaidėjas ir jis visada šį žaidimą
  pralaimi, kitaip $A$ jau būtų laimėjęs. Taigi $A$ tikrai gali laimėti (1)
  arba (2), kadangi jis pats pasirenka, kurį žaidimą žais, tai jis laimės ir
  visą žaidimą. 
\end{sprendimas}

\begin{pavnr}
  Žaidžiamas šachamatų žaidimas, bet žaidėjai pakaitomis atlieka po du
  ėjimus. Pradeda $A$. Ar jis šiuose šachmatuose gali
  garantuoti, kad niekada nepralaimės? 
\end{pavnr}

\begin{sprendimas}
  Taip. Tarkime, kad $B$ turi laiminčiąją strategiją.
  $A$ pajuda pirmyn ir atgal su žirgu ir taip jis apsikeičia pozicijomis su
  $B$, dabar jau jis turi laiminčiąją strategiją. Gavome prieštarą. Vadinasi
  $A$ turi nepralaiminčiąją strategiją. 
\end{sprendimas}

\begin{pastaba}
  Atkreipkite dėmesį, kad šis žaidimas gali tęstis be galo ilgai.
\end{pastaba}

\begin{pavnr}{(Žaidimas CHOMP)}
  Žaidėjai $A$ ir $B$ laužo $m\times n$ dydžio šokolado plytelę pakaitomis.
  Žaidėjas pasirenka kurį nors langelį ir išlaužia iš plytelės stačiakampį,
  kurio priešingos viršūnės yra šis langelis ir pradinės plytelės
  viršutinis dešinysis kampas (stačiakampio kraštinės lygiagrečios plytelės
  kraštinėms).  Pralaimi tas žaidėjas, kuris atsilaužia apatinį kairįjį
  kampą. Su kokiomis šokolado plytelėmis gali laimėti $B$?
  \label{CHOMP}
\end{pavnr}

\begin{sprendimas}
  $B$ galės laimėti tik atveju $m=n=1$. Nagrinėkime likusius atvejus. Čia
  ypatingas yra viršutinis dešinysis langelis. $B$ niekada jo negaus, jį $A$
  atlauš pirmuoju ėjimu. Tarkime, kad pirmasis žaidėjas, kad ir kaip žaistų,
  negali laimėti. Jis pirmuoju ėjimu atlaužia viršutinį dešinį langelį, $B$
  tada atlieka ėjimą $(*)$, kuris, kaip tarėme, atves jį į pergalę. Tačiau
  akivaizdu, kad $A$ savo pirmo ėjimo metu gali atlikti ėjimą $(*)$ ir
  atsidurti laiminčioje pozicijoje. Prieštara. Vadinasi žaidimą visada laimės
  $A$. 
\end{sprendimas}

\begin{pavnr}{(Tournament of Towns 2005)}
  Matelotas ir Kauntelotas nori išsidalinti $25$ monetas, kurių vertės yra $1, 2, 3, \dots
  , 25$ kapeikos. Kiekvienu ėjimu vienas žaidėjas pasirenka monetą, o kitas
  nusprendžia, kuriam iš jų jinai atiteks. Pirmasis monetą renkasi, žinoma,
  Matelotas, o kitus monetų pasirinkimus atlieka tas, kuris tuo momentu turi
  daugiau kapeikų. Jei abu žaidėjai turi lygiai kapeikų, sprendimą atlieka
  tas, kuris tai darė prieš tai. Laimi tas, kuris galų gale turi
  daugiausiai kapeikų.  Kuris žaidėjas turi laiminčiąją strategiją?
\end{pavnr}

\begin{sprendimas}
  Tokią strategiją turi Kauntelotas. Po pirmojo Mateloto pasiūlymo jis gali atsisakyti
  monetos arba ją paimti. Jei jis gali laimėti paėmęs monetą, tai taip ir
  padaro. O jeigu paėmęs monetą laimėti negali, tai duoda ją Matelotui ir po
  tokio ėjimo Matelotas niekaip negali surinkti daugiau kapeikų. Kauntelotas laimi.
\end{sprendimas}

\subsubsection{Žaidimas NIM}

\begin{api}
  NIM metu du žaidėjai pakaitomis ima akmenukus iš $n$ krūvelių. Žaidėjas gali paimti
  norimą skaičių akmenukų iš pasirinktos krūvelės. Jis turi paimti bent vieną, gali paiimti ir visus esančius toje krūvelėje. Pralaimi tas žaidėjas, kuris nebegali atlikti ėjimo. Žaidimo poziciją žymėsime $Q=(x_{1},\ldots,x_{n})$, 
kur $x_{i}$ yra akmenukų skaičius atitnkamoje krūvelėje. 
\end{api}

Pabandykime panagrinėti paprasčiausius NIM atvejus:

\begin{pavnr}
NIM žaidimas su dviem lygiomis krūvelėmis. Kuris žaidėjas turi laiminčiąją strategiją?
\end{pavnr}

\begin{sprendimas}
Antrasis žaidėjas visada gali atsakyti simetrišku ėjimu ir taip besielgdamas laimėti žaidimą.
\end{sprendimas}

\begin{pavnr}
 Kaip baigsis NIM žaidimas su lyginiu lygių krūvelių skaičiumi? Nelyginiu? 
\end{pavnr}

\begin{sprendimas}
Lyginiu atveju antrasis žaidėjas gali suskirstyti visas krūveles į poras ir įsivaizduoti, kad žaidžia vienu metu daug žaidimų po dvi lygias krūveles. Tokius žaidimus jis moka laimėti atlikdamas simetriškus ėjimus porų viduje.
Čia žaidimą išskaidėme į dalinius žaidimus, kuriuos jau mokame spręsti, tai mums padėjo išspręsti suminį žaidimą. Šiuo atveju mums pasisekė, kad visus dalinius žaidimus laimi tas pats žaidėjas, bet šiame skyrelyje pamatysite, 
kad taip galime spręsti ir kur kas sudėtingesnius uždavinius. Jei turime nelyginį krūvelių skaičių pirmajam žaidėjui tereikia nuimti pasirinktą krūvelę ir taip gauti anksčiau išnagrinėtą žaidimą, kuriame jis jau bus antrasis žaidėjas ir pagaliau džiaugsis pergale. 
\end{sprendimas}

\begin{api}
 Dviejų žaidimų H ir G suma vadinsime žaidimą H+G, čia abu žaidimai yra žaidžiami vienu metu. T.y. žaidėjas renkasi, kuriame žaidime atlikti ėjimą ir jį atlieka.  
\end{api}

\begin{pavnr}
  NIM žaidimas su trimis krūvelėmis, kuriose yra $3$, $5$ ir $7$ akmenukai. Kuris
  žaidėjas turi laiminčiąją strategiją?
\end{pavnr}

\begin{sprendimas}[Rugilės Bendinskaitės]
Pirmiausia, pralaiminti pozicija yra $(x, x, 0)$, nes tada, kad ir kiek imtų
žaidėjas, priešininkas gali paimti tiek pat iš kitos krūvelės. Tada laiminčios
pozicijos yra $(x, x, y)$ ir $(0, x, x+y)$, nes iš jų galime padaryti
pralaiminčią poziciją $(x, x, 0)$. Toliau pralaiminti pozicija yra $(1, 2, 3)$,
nes kad ir ką darytume, iš jos gauname tik laiminčias pozicijas $(0, 2,
3)$, $(1, 1, 3)$, $(1, 0, 3)$, $(1, 2, 2)$, $(1, 2, 1)$, $(1, 2, 0)$. Iš čia mes gauname,
kad laiminčios pozicijos yra $(1, 2, 3+x)$, $(1, 2+x, 3)$, $(1+x, 2, 3)$, nes iš
jų galima padaryti $(1, 2, 3)$. Sekanti pralaiminti pozicija yra $(1, 4, 5)$,
nes iš jos gauname $(0, 4, 5)$, $(1, 3, 5)$, $(1, 2, 5)$, $(1, 1, 5)$, $(1, 0,
5)$, $(1, 4, 4)$, $(1, 4, 3)$, $(1, 4, 2)$, $(1, 4, 1)$, $(1, 4, 0)$. Iš šios
pozicijos taip pat galime išvesti laiminčiąsias $(1, 4, 5+x)$, $(1, 4+x, 5),
(1+x, 4, 5)$. Toliau pralaiminti pozicija yra $(2, 4, 6)$, iš jos gauname $(1,
4, 6)$, $(0, 4, 6)$, $(2, 3, 6)$, $(2, 2, 6)$, $(2, 1, 6)$, $(2, 0, 6)$, $(2,
4, 5)$, $(2, 4, 4)$, $(2, 4, 3)$, $(2, 4, 2)$, $(2, 4, 1)$, $(2, 4, 0)$.  Iš jos
analogiškai išvedame laiminčiąsias pozicijas: $(2, 4, 6+x)$, $(2, 4+x, 6)$,
$(2+x, 4, 6)$. Kita pralaiminti pozicija yra $(3, 5, 6)$, iš jos -> $(2, 5,
6)$, $(1, 5, 6)$, $(0, 5, 6)$, $(3, 4, 6)$, $(3, 3, 6)$, $(3, 2, 6)$, $(3, 1,
6)$, $(3, 0, 6)$, $(3, 5, 5)$, $(3, 5, 4)$, $(3, 5, 3)$, $(3, 5, 2)$, $(3,
5, 1)$, $( 3, 5, 0)$. Iš jos irgi gauname laiminčias pozicijas: $(3, 5,
6+x)$, $(3, 5+x, 6)$, $(3+x, 5, 6)$.

Taigi $(3, 5, 7)$ irgi yra laiminti pozicija $(3, 5, 6+x)$.  Pirmas turi
laiminčiąją strategiją. 
\end{sprendimas}
%TODO ar Rugliė sutiko, kad jos sprendimas bus publikuojams? TAIP

Pirmasis žaidėjas A nori patikrinti ar gali laimėti žaidimą. Jis išsirašo visus žaidimus, kuriuos gali pasiekti vieno ėjimo metu. Jei tarp šių žaidimų yra tokių,
kiuriuose pradedantis žaidėjas pralaimi (juos pradeda žaidėjas B), tai A švenčia pergalę. Kad patikrintume šiuos žaidimus turime vėl išsirašyti visus pasiekiamus 
iš jų vienu ėjimu ir t.t. Jei tik žaidimas ir galimų ėjimų skaičius visose situacijose yra baigtiniai, tai procesas kažkada baigsis ir išsiaiškinsime, kuris žaidėjas laimi pradinį žaidimą. 
Tai ilgas ir keblus procesas, bet šitame skyrelyje mes jį supaprastinsime ir formalizuosime. Dažniausiai patogiau yra pradėti nuo žaidimo pabaigos pozicijos ir nagrinėti visas 
pozicijas pasiekiamas iš jos vienu atgaliniu ėjimu. Mes apibrėšime įvertį "NIM vertę", kuris mums suteiks visą reikalingą informaciją apie žaidimo poziciją, bet prieš tai dar keletas apibrėžimų.

\begin{api}
  \emph{Bešaliu} (angl. \emph{impartial}) žaidimu vadinsime tokį, kuriame aibės ėjimų, kuriuos gali atlikti abu žaidėjai, yra identiškos. 
Tokiuose žaidimuose žaidėjai skiriasi tik ėjimų atlikimo tvarka. NIM žaidimas yra bešalis, nes abu žaidėjai gali nuimti po kiek nori akmenukų, šachmatai nėra bešalis, nes žaidėjas negali judinti priešininko figūrų. 
\end{api}

\begin{api}
  Dviejų žaidėjų žaidimas yra \emph{normalus} (angl. \emph{normal}), jei jis yra bešalis ir laimi
  tas, kuris atliko paskutinį ėjimą. NIM yra normalus žaidimas. Uždaviniuose rasite Misere NIM, kuriame žaidimą laimi tas, kuris nebegali atlikti ėjimo. 
\end{api}

\begin{api}
Baigtiniu žaidimu vadinsime tokį, kuriame pabaigos pozicijai pasiekti žaidžiant optimaliai užteks baigtinio ėjimų skaičiaus ir žaidėjas kiekvieno ėjimo metu renkasi iš baigtinio skaičiaus galimų ėjimų. 
VISI toliau teorijoje nagrinėjami žaidimai bus baigtiniai šia prasme. Yra žaidimų kurie žaidžiant optimaliai baigias lygiosiomis, jie nėra baigtiniai. Nėra aišku ar šachmatai yra baigtinis žaidimas, 
o NIM tikrai visada baigsis. Anskčiau sprendėme uždavinį, kur ant stalo dedamos monetos, čia žaidėjas galėjo monetą padėti begalybėje vietelių (jei stalo paviršius didesnis už monetą), tai nebuvo baigtinis žaidimas čia aprašoma prasme.
\end{api}

\begin{api}
  NIM vertė -- tai sveikasis neneigiamas skaičius $p$, priskiriamas kuriai
  nors vienai bešalio baigtinio žaidimo pozicijai $Q$ pagal tokią taisyklę -- jis yra
  lygus mažiausiam neneigiamam sveikajam skaičiui, nepriskirtam jokiai
  pozicijai, kuri yra pasiekiama iš $Q$ vieno ėjimo metu. Žaidimo pabaigos NIM vertė lygi $0$, iš jos jau negali pasiekti jokios kitos pozicijos. Pozicijos Q NIM vertę žymėsime $F(Q)$ (Sprague-Grundy funkcija).
\end{api}   

\begin{pavnr}
NIM žaidimas su dviem krūvelėmis, kuriose yra $m$ ir $n$ akmenukų. Kuris žaidėjas turi laiminčiąją strategiją?
\end{pavnr}

\begin{sprendimas}
Pradinė pozicija yra $(n,m)$, o galutinė - $(0,0)$. Iš galutinės pozicijos negali patekti į jokią kitą poziciją, tad tikrai negali patekti ir į poziciją su NIM verte $0$, tad $F(0,0)=0$. $F(0,1)=1$, 
nes iš čia galime nuimti tą vieną akmenuką ir gauti poziciją, kurios NIM vertė yra 0,  mažiausias neneigiamas sveikasis skaičius nepriskirtas jokiai pozicijai pasiekiamai iš (0,1) vieno ėjimo metu yra 1. 
Iš $(0,2)$ galime pasiekti $(0,1)$ ir $(0,0)$, kurioms jau priskirtos vertės $0$ ir $1$, tad 2 yra mažiausias neneigiamas sveikasis skaičius nepriskirtas jokiai pozicijai pasiekiamai vieno ėjimo metu, tad $F(0,2)=2$. 
Analogiškai $F(0,n)=n$. Kaip su $(1,1)$? Galime pasiekti tik $(1,0)$, tad negalime pasiekti pozicijos su NIM verte lygia 0, $F(1,1)=0$. $F(2,1)=3$,  nes galime pasiekti $(1,1)$, $(0,1)$ ir $(0,2)$. $F(3,1)=2$, $F(2,2)=0$,
kuo toliau tuo NIM vertes vis sunkiau priskirinėti, pasiekiamų pozicijų skaičiai auga ir reikia atlikti vis daugiau tikrinimų. Jei pozicijai priskyrėmę vertę $a$, tai vieno ėjimo metu 
kitos pozicijos su verte $a$ niekaip nepasieksime. Jei pradinės pozicijos NIM vertė yra lygi $0$, tai žaidėjas A vieno ėjimo metu tikrai negali pasiekti kitos 0 pozicijos, jis pasieks poziciją $a$, o pagal apibrėžimą iš šios pozicijos 
galime pasiekti pozicijas su visomis NIM vertėmis mažesnėmis už $a$, tarp jų ir nulį, tad B galės vėl pasiekti 0 ir taip žaidimas tęsis, kol A galiauisiai atsidurs žaidimo pabaigos pozicijoje ir nebegalės atlikti ėjimo. NIM vertė 
mums parodo ar pozicija laiminti ar pralaiminti (jei pozicijos NIM vertė lygi 0 ir tavo eilė atlikti ėjimą, tai nieko gero nesitikėk). Jau šio uždavinio metu pamatėme, kad grynai mechaniškai priskyrinėti šias vertes nėra paprasta. 
0 pozicijos buvo (0,0), (1,1) ir (2,2), čia jau galime įtarti, kad krūvelės su lygiu akmenukų skaičiumi yra blogos pirmajam žaidėjui, o kitais atvejais jis gali krūveles sulyginti ir laimėti žaidimą. Mes neįrodėme, kad 
$F(n,n)=0$ (tam reiktų patikrinti visas žemesnes pozicijas), bet pirmos pralaiminčios pozicijos mums davė užuominą, kur galime ieškoti ir kitų. Skyrelio eigoje išvystysime šį metodą ir parengsime jį uždavinių sprendimui.
\end{sprendimas}

\begin{pav}
  Ant stalo yra $n$ akmenukų. Žaidėjas gali nuimti bet kokį akmenukų skaičių
  nedidesnį už $k$. Žaidėjai $A$ ir $B$ ėjimus atlieka pakaitomis, pradeda $A$.
  Laimi tas žaidėjas, kuris nuima paskutinį akmenuką. Kuris žaidėjas laimės su
  atitinkamais $n$?
\end{pav}

\begin{sprendimas}
  Raskime visų pozicijų NIM vertes. Pradėkime nuo pradžių - pozicijos su
  nuliu akmenukų vertė $0$, iš jos negalima patekti niekur kitur.
  Pozicijos su vienu akmenuku vertė $1$, nes iš jos galima patekti tik į
  vertę $0$ turinčią poziją. Pozicijos su dviem akmenukais
  vertė $2$ (jei tik $k \neq 1$), nes iš jos galima patekti tik į vertes
  $0$ ir $1$ turinčias pozicijas. Taip tęsdami gauname, jog
  jei akmenukų yra $n$, kur $n \leq k$, tai pozicijos NIM vertė bus lygi
  $n$.

  Jei akmenukų yra $n=k+1$ tai negalima patekti į poziciją, kurios NIM vertė
  $0$ (negalime nuimti visų akmenukų), tad šios pozicijos vertė $0$
  (mažiausias neneigiamas sveikasis skaičius, kuris nėra NIM vertė jokios
  pozicijos, kurią galima pasiekti iš turimos vieno ėjimo metu).

  Jei akmenukų yra $n=k+2$, tai iš jos galima patekti į poziciją, kurios NIM
  vertė $0$, bet negalima patekti į poziciją, kurios NIM vertė $1$, tad šios
  pozicijos vertė $1$. Taip tęsdami gauname, kad bendru atveju pozicijos su
  $n$ akmenukų NIM vertė bus lygi $n$ dalybos iš $k+1$ liekanai.

  Jei $A$ pradeda pozicijoje, kurios akmenukų
  skaičius dalijasi iš $k+1$, tai jis pralaimės.
  Kitu atveju $A$ laimi.
\end{sprendimas}

\begin{pavnr}
  Ant stalo yra $n$ akmenukų. Žaidejas gali nuimti $1$, $3$ arba $8$ akmenukus.
  Matemagikas ir $B$ ėjimus atlieka pakaitomis, pradeda Matemagikas. Laimi tas
  žaidejas, kuris nuima paskutinį akmenuką. Kuris žaidejas laimės su
  atitinkamais $n$?
\end{pavnr}

Akmenukų skaičiams $0$, $1$, $2$, $3$, $4$, $5$, $6$, $7$, $8$, $9$, $10$
atitinkamai priskiriame NIM vertes lygias $0$, $1$, $0$, $1$, $0$, $1$,
$0$, $1$, $2$, $3$, $2$ (Įsitikinkite!). Atlikdami šią procedūra didesniems
skaičiams pastebime, kad NIM vertės kinta periodiškai, periodo ilgis $11$
(Įsitikinkite! Galite įrodyti indukciškai). Nulines vertes turi visi
akmenukų skaičiai, kurių forma yra $11k$, $11k+2$, $11k+4$ arba $11k+6$,
kur $k$ sveikasis neneigiamas. Jei startinė pozicija bus vienos iš šių
formų, Matemagikas pralaimės, jei ne -- laimės.

Atėjo laikas grįžti prie NIM ir išspręsti jį bendru atveju: 

NIM sprendimo pagrindas yra vadinamasis NIM sumavimas. Užrašykime
kiekvienos krūvelės akmenukų skaičių dvejetaine sistema. Atlikdami paprastą
sumavimą stulpeliu įsimename, kiek dešimčių turime pernešti į kitą
eilę, o NIM sumavimas yra sumavimas be pernešimų – sudedame atskirai
kiekvieną stulpelį. NIM sumavimas žymimas simboliu $\oplus$.
Panagrinėkime pavyzdį su  $21$, $17$, $15$ akmenukų. 

\begin{center}
  \begin{tabular}[c]{r c}
    & $10101$ \\
    $\oplus$ & $10001$ \\
    & $01111$ \\ \hline
    & $01011$
  \end{tabular}
\end{center}

$21 \oplus 17 \oplus 15=11$. Matome, kad stulpelio vertė lygi nuliui, jei
tame stulpelyje yra lyginis skaičius vienetų, ir lygi vienetui, jei vienetų
skaičius yra nelyginis. NIM sumą, sudarytą vien iš nulių, vadinsime pozicija
$(*)$. 

\begin{teig}
  Iš bet kokios pozicijos, kuri nėra $(*)$, galime pereiti į  $(*)$.
\end{teig}

Randame kairiausią stulpelį, kurio NIM sumos vertė yra lygi vienetui (toks
stulpelis atsiras, nes nagrinėjama pozicija nėra $(*)$). Imame didžiausią
akmenukų kiekį $A$, kurio dvejetainėje išraiškoje šioje pozicijoje yra
vienetas ir atliekame NIM sumavimą visiems akmenukų kiekiams išskyrus $A$.
Gauname sumą $B$.  Nesunku suprasti, kad $A\geq B$, įsitikinkite tuo. Kadangi
$A\geq B$, tai galime iš $A$ paimti tiek akmenukų, kad gautume $B$, o tada visų
krūvelių NIM suma bus sudaryta vien iš nulių. Atsidursime pozicijoje $(*)$.

Pavyzdiniu atveju $A = 01111$, $B = 00100$. Dešimtainėje išraiškoje $A =
15$, $B = 4$. $A - B = 11$. Iš nagrinėjamos krūvelės atimame $11$ akmenukų ir
atliekame NIM sumavimą: 

\begin{center}
  \begin{tabular}[c]{r c}
    & $10101$ \\
    $\oplus$ & $10001$ \\
    & $00100$ \\ \hline
    & $00000$
  \end{tabular}
\end{center}

\begin{teig}
  Iš pozicijos $(*)$ negalime pereiti į kitą poziciją $(*)$.
\end{teig}

Norint tai atlikti reiktų kiekvieno stulpelio vienetų skaičių pakeisti
lyginiu skaičiumi, o kadangi turime keisti tik vienos krūvelės akmenukų
skaičių, tai to tikrai negalėsim padaryti.

\begin{enumerate}
  \item Jei pirmasis žaidėjas pradeda žaidimą pozicijoje, kuri nėra $(*)$,
    jis gali garantuoti, kad po priešininko ėjimo pozicija nebus $(*)$, kad
    priešininkas nepaims paskutinio akmenuko. Pirmasis žaidėjas turi
    laiminčiąją strategiją.
  \item Jei pirmasis žaidėjas pradeda žaidimą pozicijoje $(*)$, antrasis
    žadėjas analogiškai turi laiminčiąją strategiją. 
\end{enumerate}

\begin{pavnr}
  NIM žaidimas su trimis krūvelėmis, kuriose yra $3$, $5$ ir $7$ akmenukai. Kuris
  žaidėjas turi laiminčiąją strategiją?
\end{pavnr}

\begin{sprendimas}
Jei $Q$ yra NIM žaidimo pozicija, $N(Q)$ žymėsime tos pozicijos NIM sumą. $N(3,5,7)=1$, pirmam žaidėjui tereikia nuimti vieną akmenuką iš kurios nors krūvelės, tarkim mažiausios, tada $N(2,5,7)=0$. Kad ir kiek akmenukų nuimtų
antrasis žaidėjas, jis negalės gauti NIM sumos lygios 0. Jis galės keisti akmenukų skaičių tik vienoje krūvelėje, po šio pakeitimo bent vienoje vietelėje dvejetainėje išraiškoje vietoj 1 atsiras 0 (akmenukų skaičius sumažėja), 
tas atsiradęs vienetukas sugadina nulinę NIM sumą. Tarkim antrasis žaidėjas pakeičią poziciją į $N(2,5,1)=6$. Šio skaičiaus dvejetainė išraiška yra $110$. Išsirenkame krūvelę, 
kurioje dvejetainės išraišks trečiojoje pozicijoje yra 1, tokia yra tik krūvelė su 5 akmenukais. $N(2,1)=3$, nuimam nuo tos krūvelės $5-3=2$ akmenukus ir gauname $N(2,3,1)=0$. 
Tęsiame šį procesą, kol antrasis žaidėjas nebegalės atlikti ėjimo. Matome, kad laiminti strategija nėra unikali (pirmasis žaidėjas pirmo ėjimo metu galėjo sumažinti bet kurią krūvelę).
 \end{sprendimas}

Dabar mūsų žaislų arsenalas jau yra pilnai sukomplektuotas. Turime du įverčius: NIM sumą ir NIM vertę. Pademonstravome, kad jei $N(Q)=0$, tai pozicija yra pralaiminti, 
tačiau $F(Q)$ tuo atveju taip pat yra lygi $0$. Įrodysime, kad $N(Q)=F(Q)$ visoms NIM žaidimo pozicijoms $Q$. 

\begin{thm}
  NIM žaidime pozicijos NIM suma yra tos pozicijos NIM vertė. 
\end{thm}

Jei turime NIM krūveles su kiek tais akmenukų (pozicija Q) ir staiga velniažin kodėl atliekame joms NIM sumavimą, tai gauname
tokį NIM žaidimo įvertį (pozicijos NIM sumą N(Q)), kuris leidžia nustatyti ar tai
laiminti, ar pralaiminti pozicija. Jei $N(Q)=0$, tai iš turimos pozicijos
negalima vieno ėjimo metu pasiekti tokios, kurios NIM suma lygi 0. Kitu atveju visada galėsime pasiekti tokią poziciją P, kad $N(P)=0$.
Jei mums pavyktų parodyti, kad iš pozicijos Q, kuriai $N(Q)=A$,
vieno ėjimo metu galime patekti į pozicijas, kurių NIM sumos būtų visi mažesni
už A sveikieji neneigiami skaičiai, bet negalime patekti į poziciją, kurios NIM
suma lygi A, tai parodytume, kad NIM suma tenkina NIM vertės apibrėžimą.

Jei $N(Q)=A$, tai negalime patekti į kitą
poziciją su NIM suma lygia A. Kiekvieno stulpelio vienetukų skaičių
turėtume pakeisti lyginiu skaičiumi, o galime keisti tik vieną eilutę (viena
krūvelę).

NIM sprendime parodėme, kad jei A nelygu 0, tai iš turimos pozicijos galime
patekti į poziciją, kurios NIM suma lygi 0. Telieka parodyti, kad galime
patekti į pozicijas, kurių NIM sumos būtų visi mažesni už A sveikieji
neneigiami skaičiai. Užsirašome A dvejetaine išraiška. Joje yra kažkiek
vienetų, nes A nelygu 0. Tarkime, kad norime gauti poziciją, kurios NIM suma
būtų B. Atsiras bent vienas toks stulpelis, kuriame skaičiuje A yra vienetukas,
o skaičiuje B jau nuliukas, nes A daugiau už B. Išsirenkame
kairiausią tokią stulpelį. Nesunku įsitikinti, kad visi A ir B skaitmenys
kairiau šio stulpelio sutampa. Tada išsirenkame tokią krūvelę,
kurios dvejetainėje išraiškoje šiame stulpelyje yra vienetukas. Šį vienetuką
pakeičiame nuliuku, tada visus dešiniau esančius skaitmenis galime pakeisti
kaip norime, vistiek gausime mažesnę krūvelę negu turėjome. Nesunku suprasti,
kad juos galėsime pakeisti taip, kad gautume pozicijos NIM sumą lygią B.

\begin{thm}
  Jei turime du bešalius normalius baigtinius žaidimus A ir B, kuriems $F(A)=a$ ir $F(B)=b$, tai $F(A+B)=N(a,b)$. Čia A+B yra suminis žaidimas, kur A ir B yra žaidžiami vienu metu. 
\end{thm}

Trumpam užmirškite žaidimus A ir B ir patikėkite, kad žaidžiate NIM žaidimą su
dviem krūvelėmis, kuriose yra atitinkamai a ir b akmenukų. Remiantis pirmuoju
uždaviniu šio suminio NIM žaidimo NIM vertė lygi jo NIM sumai t.y.
$a\oplus b$. Tai reiškia, kad jei turėtume tas dvi krūveles, tai iš jų vieno ėjimo metu
negalėtume pasiekti žaidimo, kurio NIM vertė lygi  $a\oplus b$ ir galėtume
pasiekti žaidimus su visomis NIM vertėmis mažesnėmis už $a\oplus b$. 

Grįžkime prie žaidimų A ir B. Tai nebūtinai yra NIM žaidimai, bet jie yra
normalūs bešaliai baigtiniai, tad turi savo NIM vertes. Parodysime, kad jei žaidimus
žaistume vienu metu, tai suminio žaidimo įvertis P(A,B)=N(F(A),F(B)) ir būtų šio
žaidimo NIM vertė. Tarkime priešingai, kad tai nėra suminio žaidimo NIM vertė.
Yra dvi galimybės:

1) Iš suminio žaidimo su  $P(A,B)=a\oplus b$ galime patekti į žaidimą su
įverčiu $a\oplus b$. Nemažindami bendrumo tariame, kad tam pasiekti atliktume
ėjimą žaidime A. Atlikę ėjimą patektume į poziciją žaidime A su NIM verte c ir
$a\oplus b = c\oplus b$, tačiau iš to seka, kad $a=c$ (įsitikinkite!), tačiau
a yra žaidimo A NIM vertė, tad pagal apibrėžimą vieno ėjimo metu negalime iš
žaidimo su NIM verte a pereiti į žadimą su NIM verte $c=a$, tad gavome
prieštarą.

2) Iš suminio žaidimo su įverčiu $a\oplus b$ negalime patekti į žaidimą su
įverčiu $c$, kur $c$ mažiau už $a\oplus b$. Tačiau NIM žaidime su dviem krūvelėmis po a ir
b akmenukų egzistuoja toks ėjimas kažkurioje krūvelėje, kad gautos pozicijos
NIM vertė būtų c. Nemažindami bendrumo galime teigti, kad
tą ėjimą reikia atlikti su krūvele a nuimant d akmenukų. Pastebime, kad jei
žaidime A pereitume iš pozicijos su NIM verte lygia a į poziciją su NIM verte
lygia a-d, tai suminio žaidimo įvertis  $a-d\oplus b$ būtų lygus c, prieštara.
Vadinasi suminio žaidimo NIM vertė yra dalinių žaidimų NIM verčių NIM suma.

Šis faktas leidžia mums išžarnoti žaidimus. Vieną žaidimą žaisti kiap daug
atskirų arba suplakti daug žaidimų į vieną krūvą. Svarbi informacija mums tėra
NIM vertė, tai viskas, kas apibūdina bešalį žaidimą. Tiesa yra vienas "bet".
Dažnai jau ir išskaidytų žaidimų NIM verčių apskaičiavimas gali būti labai
kebli problema arba išskaidyti žaidimo tiesiog nepavyksta. Tad čia aprašau
įrankius, kurie teoriškai turi išspręsti kiekvieną bešalį normalų baigtinį žaidimą (NIM vertes
visada galit apsiskaičiuoti, tereikia laiko ir atidumo), bet deja labai
sudėtingiems žaidimamas išspręsti jums gali neužtekti saulės sistemos gyvavimo
amžiaus, tad gali tekti pasiplanuoti laiką. 

\begin{pavnr}
  Žaidimas pradedamas su keturiomis akmenukų krūvelėmis, kurių dydžiai $3$,
  $4$, $5$ ir $6$. $A$ ir $B$ atlieka ėjimus pakaitomis. Galima atlikti du
  ėjimus:
  \begin{enumerate}
    \item Paimti vieną akmenuką iš krūvelės, jei joje lieka ne mažiau negu $2$.
    \item Paimti visą krūvelę iš trijų arba dviejų akmenukų.
  \end{enumerate}
  Laimi tas, kuris atlieka paskutinį ėjimą. Kuris žaidėjas gali visada laimėti?
\end{pavnr}

Krūvelių dydžiams 3, 4, 5 ir 6 atitnkamai priskiriame NIM vertes lygias 2, 0, 1
ir 0. Pozicijos NIM vertė pagal trečiąjį uždavinį lygi $2\oplus 0\oplus
1\oplus 0=3$, tad matome, kad pirmasis žaidėjas laimės pirmuoju ėjimu paėmęs
vieną akmenuką iš krūvelės su 3 akmenukais. 

\begin{pastaba}
  Mes remiamės faktu, kad NIM verčių NIM suma yra lygi suminio žaidimo NIM
  vertei. Tai leidžia suminį žaidimą išskaidyti į 4 nesudėtingus
  žaidimus, išspręsti juos atskirai ir greitai viską sulipdyti atgal. Šis
  žaidimas yra B5 uždavinys iš 1995 metų Putnamo varžybų. Platesnę jo analizę galite rasti "The William Lowell Putnam
  Mathematical Competition 1985–2000 Problems, Solutions, and Commentary".
\end{pastaba}

\subsubsection{Paskutiniai štrichai}

Jau anksčiau galėjome įsivaizuoduoti bešalį žaidimą kaip grandinę
besikaitaliojančių laiminčių ir pralaiminčių pozicijų. Jei tu pralaimi, tai
gudriais ėjimais gali tik pratęsti savo kančią. Dabar mes žaidimą sutraukėme į
vieną skaičių, žaidimo NIM vertę. Ji ne tik parodo, kuris žaidėjas laimės šį žaidimą, bet leidžia išsiaiškinti, kas laimės suminius žaidimus, kurių sudedamoji dalis jis yra. 

\subsubsection{Uždaviniai}

\begin{enumerate}

  \item Žaidėjai $A$ ir $B$ paeiliui laužia šokolado plytelę  $m\times n$ išilgai
    linijų ir atsilaužtą dalį suvalgo. Apatinis kairysis langelis yra
    užnuodytas, jį suvalgęs žaidėjas pralaimi. Su kokiomis $m$ ir $n$ reikšmėmis
    žaidėjas $B$ turi laiminčiąją strategiją? 
    %Vienu ėjimu galime sumažinti tik vieną iš parametrų (ilgį arba plotį).
    %Nagrinėdami paprastesnius atvejus pastebime, kad atvejais $0\times 0$,
    %$1\times 1$ ir $2\times 2$ laimi $B$. Natūralu galvoti, kad atveju $n\times
    %n$ visada laimės $B$. $A$ atlieka ėjimą su kvadratu ir $B$ gauna ne kvadratinę
    %plytelę iš kurios visada gali padaryti kvadratą ir taip išsaugoti savo
    %laiminčiąją poziciją. Atveju $m=n$ laimi $B$, kitais atvejais laimi $A$.

  \item Žaliaūsis ir Purpurinūsis pakaitomis deda žalius ir purpurinius žirgus
    ant laisvų šachmatų lentos langelių, pradeda Žaliaūsis. Negalima žirgo
    padėti taip, kad jį kirstų priešininko figūra. Laimi tas, kuris atlieka
    paskutinį ėjimą. Kas laimės?
    %Purpurinūsiui tereikia dėti žirgą į langelį, kuris yra simetriškas
    %Žaliaūsio užimtam lentos horizantaliosios (arba vertikaliosios) ašies
    %atžvilgiu. 

  \item Pradžioje $n=2$. $A$ ir $B$ pakaitomis prideda prie turimo skaičiaus $n$
    bet kokį jo daliklį, kuris nėra lygus $n$, ir priešininkui pateikia naująjį
    $n$. Laimi tas, kuris parašo skaičių ne mažesnį už $1990$. Kas laimės?
    %Pirmu ėjimu $A$ prideda $1$ ir gauna $n=3$. Dabar $A$ visada galės paeiti
    %taip, kad $B$ gautų nelyginį skaičių, o po šio ėjimo $A$ atitektų
    %lyginis. $B$ galės pridėti nedaugiau negu vieną trečiąją turimo
    %skaičiaus, o $A$ visada galės pridėti bent pusę. Taigi $A$ ramiai stebi
    %priešininko agoniją tol, kol gauna $n\geq 1328$. Jis, pridėdamas pusę šio
    %skaičiaus, pasieks skaičių nemažesnį už $1990$

  \item Žaidimas pradedamas skaičiumi $1$. Žaidėjai pakaitomis skaičių daugina iš
    natūrinio skaičiaus didesnio už $1$, bet mažesnio už $10$ ir taip gauna naują
    skaičių. Laimi tas, kuris primasis gauna skaičių didesnį už $1000$. Ar kuris
    nors žaidėjas turi laiminčiąją strategiją? Jei taip, kokia ji?  
    %Pirmasis turi laiminčiąją strategiją. Jis daugina $1$ iš $4$. Tada antrasis gali
    %padauginęs duoti skaičių nuo $8$ iki $36$. Tada pirmasis daugina šį skaičių iš
    %tokio skaičiaus, kad gautųsi skaičius, didesnis arba lygus $56$ (tai visada
    %įmanoma $(8\cdot 7=56, 36\cdot 2=72)$. Antrasis šį skaičių turi dauginti bent jau iš $2$,
    %tad mažiausiai sudaro skičių $112$, o jį pirmasis daugina iš $9$ ir gauna $1008$.
    %Pirmasis laimėjo.

  \item Duotas nelyginis natūrinis $n>1$. Ant lentos užrašytas skaičius $k=2$ du
    žaidėjai pakaitomis gali pakeisti $k$ į $2k$ arba $k+1$. Pralaimi tas, kuris
    užrašo ant lentos skaičių didesnį už $n$. Su kuriais $n$ antrasis žaidėjas
    turi laiminčiąją strategiją? 
    %Jokiais. Pirmasis žaidėjas visada gali pateikti antrajam nelyginį skaičių, o
    %antrasis į jį turės atsakyti lyginiu. Tad pirmajam tereikia visada $k$ keisti
    %į $k+1$. Taip jis tikrai neparašys skaičiaus didesnio už $n$, nes antrasis
    %žaidėjas negali parašyti jokio nelyginio skaičiaus, tuo tarpu ir $n$.

  \item  Du žaidėjai pakaitomis spalvina po vieną  $4\times 4$ lentelės langelį.
    Pralaimi tas, po kurio ėjimo lentelėje atsiranda pilnai nuspalvintas
    kvadratas  $2\times 2$. Kuris žaidėjas turi laiminčiąją strategiją?
    %Antrasis. Kiekvienu ėjimu jis spalvina langelį per du langelius aukščiau arba
    %žemiau pirmojo nuspalvintam. Nesunku pastebėti, kad tai veda į pergalę.

  \item Ant stalo guli $2002$ kortos. Ant jų surašyti skaičiai nuo $1$ iki $2002$. Du
    žaidėjai paeiliui ima nuo stalo po kortą ir slepia ją kišenėje. Laimi tas
    žaidėjas, kurio visų kortų, esančių kišenėje, sumos paskutinis skaitmuo yra
    didesnis už priešininko. Ar kuris nors žaidėjas turi laiminčiąją strategiją?
    Jei taip, tai kokia ji? 
    %Laimi Pirmasis ($P$). Suporuojame kortas į poras $(k,1000+k)$, kur $k = 1,\cdots
    %, 1000$ ir $(2001,2002)$. Visų porų, išskyrus paskutiniąją, paskutinis skaitmuo
    %abiejuose skaičiuose lygus. Pirmu ėjimu $P$ renkasi $2002$. Tada atsakinėja
    %paimdamas kortą iš tos poros, iš kurios paima antrasis. Kažkada $A$ bus
    %priverstas paimti $2001$, jei ant stalo dar yra kortų, tai $P$ ima bet kurią ir
    %elgiasi taip pat, kaip prieš tai. Žaidimo pabaigoje $P$ turi sumą, kuri lygsta $2$
    %moduliu $10$, o $A$ -- $1$ moduliu $10$.

  \item $P$ ir $L$ sugalvoja po natūrinį skaičių ir pateikia jį atsitiktiniam
    asmeniui $A$. $A$ geba suskaičiuoti šių skaičių sandaugą bei sumą ir užrašo šiuos
    du skaičius ant atskirų kortelių. Vieną šių kortelių ($P$ ir $L$ nežino kurią) $A$
    parodo vaikinams, o kitą magiškai pradangina. Parodytoji kortelė paženklinta
    įsimintinu skaičiu $2002$. $P$ žvilgteli į šį skaičių ir prisipažįsta, kad
    nežino, kokį skaičių sugalvojo $L$. Tai žinodamas, $L$ taip pat atsako, kad
    nenutuokia, koks yra $P$ skaičius. Koks yra $L$ pasirinktas skaičius? 
    %Tebūnie $p$ ir $l$ yra $P$ ir $L$ sugalvoti natūriniai skaičiai. $p|2002$, kitaip $P$
    %žinotų $l$. Taip pat $l|2002$, kitaip $L$ žinotų $p$. Be to $(2002-l)|2002$, kitaip
    %$L$ žinotų $P$. Čia jau nesunku įsitikinti, kad $1001$ yra vienintelis tinkamas $2002$
    %daliklis tenkinantis šį sąryšį. Tad $l=1001$ 

  \item  $n\times n$ šachmatų lentos kairiajame apatiniame kampe guli akmenukas.
    $A$ ir $B$ ėjimus atlieka pakaitomis, pradeda $A$. Žaidėjai gali pastumti
    akmenuką į gretimą langelį, kuris dar niekada nebuvo aplankytas. Laimi tas,
    kuris atlieka paskutinį ėjimą.\\
    1) Kas laimi su lyginiais $n$? \\
    2) Kas laimi su nelyginiais $n$? \\
    3) Kas laimi, jei žaidimo pradžioje akmenukas yra gretimame kampiniam langelyje?
    %1) Lentą galima padalinti į stačiakampius $2\times 1$. $A$ tereikia
    %pereiti į gretimą to pačio stačiakampio langelį. $B$ tada turės pereiti į
    %kitą stačiakampį ir $A$ visada galės atlikti dar vieną ėjimą.  
    %
    %2) Lentą galima padalinti į stačiakampius $2\times 1$ neįtraukiant
    %apatinio kairiojo kampo. Tada analogiškai žaisdamas laimi $B$.
    %
    %3) Čia $B$ jau bejėgis. Lyginiams $n$ strategija analogiška (1). Kitu
    %atveju lentą padaliname į stačiakampius $2\times 1$, bet neįtraukiame
    %apatinio kairiojo kampo. Lentą nuspalviname įprastiniu būdu. Pastebime,
    %kad apatinis kairys langelis $B$ yra nepasiekiamas, tad $A$ laimi
    %pajudėdamas į gretimą stačiakampio langelį.

  \item $A$ padeda žirgą  į pasirinktą  $8\times 8$ lentos langelį. Tada $B$
    atlieką ėjimą ir toliau ėjimai atliekami pakaitomis. Kiekviename
    langelyje žirgas gali pabūti tik vieną kartą. Pralaimi tas, kuris
    nebegali atlikti ėjimo. Kas laimi?
    %Suskirstome lentą į stačiakampius  $2\times 4$. Pastebime, kad iš bet
    %kurio stačiakampio langelio žirgo ėjimu galime patekti tik į vieną to
    %stačiakampio langelį. $A$ padeda žirgą į vieną iš stačiakampių, $B$ tereikia
    %paeiti į langelį esantį tame pačiame stačiakampyje. Kitu ėjimu $A$ būtinai
    %turės pereiti į kitą stačiakampį, taip sudarydamas galimybę $B$ judėti to
    %stačiakampio viduje. Žaidimą visada laimės $B$.

  \item Netikėtai žaidimą vėl žaidžia $A$ ir $B$, $A$ pradeda, ėjimai atliekami
    pakaitomis. Yra dvi krūvelės atitnkamai po $p$ ir $q$ akmenukų. Ėjimo metu
    žaidėjas gali paimti pasirinktą akmenuką iš pasirinktos krūvelės, paimti po
    akmenuką iš kiekvienos krūvelės arba perkelti akmenuką iš vienos krūvelės į
    kitą. Kas laimi su atitnkamais $p$ ir $q$?
    %Jei nors vienoje iš krūvelių yra nelyginis akmenukų skaičius, laimi $A$.
    %Jam tereikia pirmu ėjimu akmenukų skaičius paversti lyginiais abejose
    %krūvelėse. Tada po $B$ ėjimo nors vienoje krūvelėje tikrai bus nelyginis
    %akmenukų skaičius ir $A$ galės tęsti savo spektaklį. Kitu atveju
    %analogiškai žaisdamas laimės $B$. 

  \item(Žaidimas CHOMP) Taisyklės nurodytos netiesioginių sprendimų skyrelyje.
    Sugalvokite strategiją, kuri pelnytų pirmajam žaidėjui pergalę atvejais: \\
    1) $m=n$. \\
    2) $m=2$, $n$ -- bet koks natūralusis skaičius.\\
    3) $m$ ir $n$ – bet kokie natūralieji skaičiai.
    %1) $A$ tereikia atlaužti kvadratą $m-1\times m-1$ ir tada laužti
    %simetriškai įstrižainei.\\
    %2) $A$ tereikia visada laužti kampinį langelį.\\
    %3) Laiminti CHOMP žaidimo strategija nėra žinoma bendru atveju, tai atvira
    %problema. Jei manote, kad uždavinį išsprendėte, tai dar kartelį
    %peržvelkite savo sprendimą : ] 

  \item Duotas trikampis pyragas, kurio plotas yra vienetas. $A$ renkasi tašką
    $X$ trikampio plokštumoje. $B$ pjauna tiese, einančia per $X$. Kokį
    didžiausią plotą $B$ gali atsipjauti?
    %$A$ renkasi pusiaukraštinių susikirtimo tašką, o $B$ brėžia per jį tiesę,
    %lygiagrečią vienai kraštinių, ir gauna $\frac{5}{9}$ pyrago. Brėždamas kitą
    %tiesę per $X$ jis gautų mažiau, o jei $X$ nebūtų šis taškas, tai $B$ tikrai
    %galėtų gauti daugiau (įrodykite tai geometriškai). 

  \item Duotas daugianaris $x^3+\dots x^2+\dots x+ \dots=0$. $A$ parašo
    sveikąjį skaičių, nelygų $0$, vietoj kurio nors tritaškio. Tada $B$ rašo
    sveikąjį skaičių ir daugianarį sveikuoju skaičiumi užbaigia $A$.
    Įrodykite, kad $A$ gali žaisti taip, kad visos trys daugianario šaknys būtų
    sveikieji skaičiai.
    %$A$ pirmu ėjimu rašo $-1$ prie $x$. $B$ rašo $a$, o $A$ atsako $-a$. $x^3-a x^2-1
    %x+a=0$ turi šaknis $-1$, $1$ ir $a$. Tai sveikieji skaičiai.

  \item \text{[All Russian Olympiad 1992]} Krūvelėje yra $N$ akmenukų.
    Žaidėjas gali paimti $k$ akmenukų, kur $k$ dalina akmenukų skaičių paimtą
    priešininko jo paskutinio ėjimo metu. Pirmu ėjimu pirmasis žaidėjas gali
    paimti kiek nori akmenukų, išskyrus $1$ ir $N$. Laimi tas, kuris paima
    paskutinį akmenuką. Su kokiu mažiausiu $N\geq 1992$ antrasis žaidėjas
    turi laiminčiąją strategiją?
    %Įrodysime, kad visiems $N>1$, antrasis žaidėjas laimi tada ir tik tada,
    %jei $N=2^m$. Tokiu atveju pirmasis žaidėjas paima $2^a(2b+1)$ akmenukų,
    %kur $a\geq 0$ ir $b\geq 0$. Tada antrasis žaidėjas paima $2^a$, o kitais
    %ėjimais kopijuoja pirmojo žaidėjo veiksmus (įsitikinkite, kad tai
    %garantuoja pergalę). Jei $N=2^a(2b+1)$, kur $a\geq 0$ ir $b\geq 1$ tada
    %laimi pirmasis žaidėjas pirmu ėjimu paimdamas $2^a$ akmenukų ir kitais
    %ėjimais kopijuodamas antrojo žaidėjo veiksmus.

  \item Žaidėjai pakaitomis renkasi skaičius iš aibės ${1, 2, 3, 4, 5, 6, 7,
    8, 9}$. Jei žaidėjas surenka tris skaičius, kurių suma lygi $15$, jis
    laimi.  Kaip baigiasi žaidimas, jei žaidžiama optimaliai? Kokiam gerai
    žinomam žaidimui ši užduotis yra izomorfiška?
    %Kryžiukams-nuliukams. Įsitikinkite tuo!

  \item Merlinkas sugalvoja skaičių $N$. Matekaralius nupiešia $N$
    stačiakampių, sudarytų iš vienetinių langelių (nebūtinai lygių ir būtinai
    netuščių). Merlinkas iš piešinėlių išburia analogiškas šokolado plyteles.
    Jis pirmasis atsilaužia nuo pasirinktos plytelės šokolado (laužia išilgai
    linijų) ir jį suvalgo arba suvalgo visą plytelę. Ėjimai vyksta
    pakaitomis. Pralaimi tas žaidėjas, kuris nebegali atlikti ėjimo.  Ar
    Merlinkas turi laiminčiąją strategiją?  
    %Prisiminkite NIM : ] 

  \item Ant stalo yra $n$ akmenukų. Žaidėjas gali paimti nedaugiau negu pusę
    jų. Žaidėjai $A$ ir $B$ ėjimus atlieka pakaitomis, pradeda $A$.  Laimi
    tas žaidėjas, kuris atlieka paskutinį ėjimą. Kuris žaidėjas laimės su
    atitinkamais $n$?
    %Žaidimo pabaigos pozicija yra $1$ akmenukas. Akmenukų skaičiams $1$, $2$,
    %$3$, $4$, $5$, $6$, $7$ priskiriame NIM vertes lygias $0$, $1$, $0$, $2$,
    %$1$, $3$, $0$. Priskyrus vertes didesniems skaičiams nesunku pastebėti ir
    %įrodyti, kad nulines vertes turės skaičiai, kurių forma $2^k-1$, kur $k$
    %sveikasis neneigiamas. Taigi jei $n=2^k-1$, tada laimi $B$, kitais
    %atvejais pergalę švenčia $A$. 

  \item Plokštumoje nubrėžiami $1994$ vektoriai. Du žaidėjai paeiliui renkasi
    vektorius ir juos sumuoja su jau turimais. Pralaimi tas, kuris galų lage
    turi trumpesnį vektorių. Ar pirmasis žaidėjas turi nepralaiminčią
    strategiją?
    %$1994$ vektorių suma yra $\vec a$. Pirmasis žaidėjas žaidžia tokioje
    %kordinačių sistemoje, kur $x$ ašis sutampa su $\vec a$ kryptimi. Jei $\vec
    %a=0$, tada kryptis gali būti bet kokia. Kiekvienu ėjimu žaidėjas renkasi
    %vektorių, kurio projekcija į $x$ ašį didžiausia. Galų gale pirmojo žaidėjo
    %vektoriaus projekcija į $x$ ašį bus nemažesnė už antrojo, o abiejų žaidėju
    %vektorių projekcijos į $y$ ašį bus lygios (jų suma lygi nuliui) Taigi
    %pirmasis žaidėjas niekada nepralaimės.

  \item Įrodykite, kad jei turime $n$ bešalių normalių žaidimų
    $(A_{1},\ldots,A{n})$, tai
    $F(A_{1}+\ldots+A_{n})=N(F(A_{1},\ldots,F(A_{n}))$ (Suminio žaidimo NIM
    vertė bus lygi visų žaidimų NIM verčių NIM sumai)

    %Įrodysime taikydami indukciją. Skyrelio metu įrodėme, kad tai teisinga su $n=2$
    %Tarkime tai teisinga su $n$, įrodysime, kad tai teisinga su $n+1$. Paimame bet
    %kuriuos du žaidimus. Tarkim, kad jų NIM vertės atitinkamai lygios $a$ ir $b$. Tada
    %jų suminio žaidimo NIM vertė lygi $a\oplus b$ ir šį
    %suminį žaidimą galim traktuoti kaip vieną žaidimą su atitinkama NIM verte.
    %Tad dabar turime $n$ žaidimų, o tarėme, kad jiems galioja sąlyga. Įrodyta. 

  \item Žaidimo erdvė yra $n$ langelių ilgio juosta. Žaidėjai pakaitomis spalvina
    po du gretimus langelius. Žaidžia du žaidėjai, pralaimi tas, kuris nebegali
    atlikti ėjimo. Kuris žaidėjas turi laiminčiąją strategiją su $n=9$, $n=13$,
    $n=15$? \footnote{Tai Project Euler 306-tas uždavinys. Tai gana įdomus projektas
    tiems, kurie nėra super programuotojai. Galite pabandyti išspręsti ir visą
    uždavinį.}
    %Tarkime, kad visiems ilgiams mažesniems už $n$ jau priskyrėme NIM vertes.
    %Pastebime, kad jei juostą kur nors nuspalviname tai taip ją padaliname į du
    %regionus. Jei juosta yra ilgio $n$, tai galime ją padalinti $[n/2]$ skirtingų
    %būdų. Padalinę gauname dviejų žaidimų sumą, kurių abiejų NIM vertes jau
    %žinome, tad galime apskaičiuoti ir suminio žaidimo NIM vertę. Išnagrinėję
    %visus galimus padalinimus rasime visas NIM vertes, kurias galime pasiekti
    %vieno ėjimo metu, tad žinosime ir $n$ ilgio juostos NIM vertę. Suprantant šį
    %algoritmą visai nesudėtinga išsiaiškinti, kurios pozicijos laiminčios, o kurios
    %pralaiminčios.

  \item Yra dvi krūvelės, vienoj $n$, kitoj $m$ akmenukų. Dar yra Julius su Gyčiu.
    Jie gali nuimti ir suvalgyti norimą skaičių akmenukų iš vienos krūvelės arba po lygų
    skaičių akmenukų iš abiejų krūvelių. Aišku, kad pradeda Gytis. Laimi tas, kuris
    suvalgo paskutinį akmenuką. Raskite pirmas $10$ pralaimičių pozicijų. Raskite
    rekursinį sąryšį tarp pralaiminčių pozicijų ir jų numerių (t.y. išreiškite
    $n$-ają pralaimičią poziciją, per ankstesnes). Gal pavyks išreikšti visas
    pralaiminčias pozicijas per jų numerius?
    %Tai yra plačiai žinomas ir magiškas Wythofo žaidimas (angl. \emph{Wythoff's game}). Jis
    %gana išsamiai nagrinėjamas A.~Engel knygoje "Problem solving strategies".
    %
    %Tikrai nesunku rasti pirmąsias pralaiminčias pozicijas:
    %
    %\begin{tabular}{l l l}
    %0. (0,0) &  4. (6,10) &  8. (12,20)\\
    %1. (1,2) &  5. (8,13) &  9. (14,23)\\
    %2. (3,5) &  6. (9,15) & 10. (16,26)\\
    %3. (4,7) &  7. (11,18)& 11. (17,28)
    %\end{tabular}
    %
    %Pažiūrėkime į lentelę atidžiau -- kiekvienas skaičius (kogero!) pasirodo
    %tiksliai po vieną kartą ir skaičių poros skirtumas $n$-tojoje pozicijoje
    %(kogero!) lygus  $n$. Po šių pastebėjimų uždavinys jau beveik išspręstas.
    %Keliame hipotezę, kad pirmasis pralaiminčios poros skaičius yra mažiausias
    %dar niekada nepasirodęs lentelėje $x_{n}$, o antrasis lygus $x_{n}+n$.
    %Įrodysime, kad taip gauname visas pralaimičias pozicijas beigi tik
    %pralaiminčias. Pralaiminčias pozicijas mes vertinsime pagal mažiausiąjį poros
    %elementą. Taip vertinant $(0,0) < (1,2) < (3,5)$ ir t.t. Nesunku suprasti, kad
    %skaičius $x$ gali būti tik vienos poros mažiausias elementas (Nesunku?). 
    %
    %Pirmoji pora $(0,0)$ yra tikrai pralaiminti ir nėra mažensių pralaiminčių
    %pozicijų. Tarkime, kad visos poros iki $(x_{n},x_{n}+n)$ yra
    %pralaiminčios ir tarp jų nėra mažesnių pralaiminčių pozicijų, kurios nėra
    %įtrauktos pagal šią taisyklę. Įrodysim, kad ir $(x_{n+1},x_{n+1}+n+1)$ yra
    %pralaiminti, bei tarp jos ir $(x_{n},x_{n}+n)$ nėra pralaiminčių pozicijų. 
    %
    %1) Jei tarp jų atsirastų pralaiminti pozicija $(a,b)$, tai jos mažiausias
    %elementas $x_{n}<a<x_{n+1}$, tačiau pagal $x_{k}$ apibrėžimą, jau yra
    %pralaiminti pora $(c,a)$<$(x_{n},x_{n}+n)$, kuri turi didesnįjį elementą $a$.
    %$b>a>c$, tad iš poros $(a,b)$ vienu ėjimu galime gauti porą $(c,a)$, tad
    %$(a,b)$ nėra pralaiminti. Prieštara.
    %
    %2) Tarkime, kad pora $(x_{n+1},x_{n+1}+n+1)$ yra laiminti. Iš jos vieno ėjimo
    %metu turime galėti pasiekti pralaimičiąją poziciją. Tikrai nėra pralaiminčios
    %pozicijos su narių skirtumu n+1, tad mums teks nuimti akmenukus iš kurios nors
    %vienos krūvelės. Pagal apibrėžimą skaičiaus $x_{n+1}$ tikrai nėra nė vienoje
    %pralaiminčioje poroje, gal ten yra skaičius $x_{n+1}+n+1$? $x_{n+1}$ yra
    %didesnis už visus kitus mažiausius pralaiminčių porų elementus, o n+1 daugiau
    %už visus pasitaikančius skirtumus tarp poros elementų, tad $x_{n+1}+n+1$ yra
    %aiškiai didesnis už visus skaičius pasitaikančius pralaiminčiose pozicijose.
    %Tad nei nuėmę po lygų akmenukų skaičių iš abiejų krūvelių, nei pažaidę su
    %viena krūvele mes niekaip nepasieksime pralaiminčios pozicijos. Prieštara

  \item Turima šaškių lentą, kuri tęsiasi į begalybę tiek į viršų, tiek į dešinę,
    bet turi fiksuotą apatinį kairį kampą. Kažkur lentoje lūkuriuoja Alisa.
    Žaidžia Vytautas ir Aleksas, pradeda pastarasis. Jie ėjimo metu liepia Alisai
    eiti į kairę, apačią arba įstrižaine į apačią ir kairę per norimą langelių
    skaičių. Laimi tas, kas nusiveda Alisą į apatinį kairį kampą. Nupaišykite
    lentelę $7\times 7$, kur kiekviename langelyje įrašyta to langelio NIM vertė.
    Gal pavyktų nustatyti rekursinį saryšį tarp pralaiminčių langelių ir jų eilės
    numerių? 
    %Žaidimas identiškas ankstesniajam, ar ne puiku? 

  \item Turime stačiakampį gretasienį  $a\times b\times c$, kurio apatiniame
    kairiame artimesniame žaidėjams kampe tupi šaškė. Žaidėjai gali ją stumtelti
    į viršų, dešinę arba tolyn nuo savęs (Ta trečia trajektorija). Laimi tas,
    kuris nutūpdo šaškę priešingame gretasienio kampe. (Viršutiniame dešiniame
    tolimajame). Du žaidėjai ėjimus atlieka pakaitomis. Kokį sąryšį turi tenkinti
    $a$, $b$, ir $c$, kad pirmasis žaidėjas turėtų laiminčiąją strategiją?
    %Žaidimas identiškas NIM žaidimui su trimis krūvelėmis, kurių dydžiai yra
    %$a-1$, $b-1$ ir $c-1$ (jei tariame, kad kampinio langelio kordinatės lygios
    %(1,1,1) ir $a$, $b$ ir $c$, jei kampinio langelio kordinatės lygios (0,0,0).

  \item \text{[All Russian Olymnpiad 1994]} Žaidėjai $A$, $B$ paeiliui atlieka ėjimus su
    žirgu  $1994\times 1994$ šachmatų lentoje. $A$ atlieka horizontalius (pereina
    į gretimą eilutę) ėjimus, o $B$ – vertikalius. $A$ pasirenka žirgo poziciją
    ir atlieka pirmą ėjimą. Žirgas negali atsidurti langelyje, kuriame jau
    yra buvęs. Pralaimi tas, kuris nebegali atlikti ėjimo. Įrodykite, kad $A$
    turi laiminčiąją strategiją.
    %\emph{Pirmas sprendimas} Imame dvi viršutines eilutes ir sunumeruojame langelius iš kairės į
    %dešinę. Brėžiame rodyklę iš apatinio trečio langelio į viršutinį pirmą, iš
    %apatinio $5$ į viršutinį $3$ ir t.t. Imame dvi žemensnes eilutes ir brėžiame
    %rodykles iš viršutinio antro langelio į apatinį ketvirtą, iš viršutinio
    %ketvirto į apatinį $6$ ir t.t. Dar dvi žemesnes eilutes pažymime kaip pirmas
    %dvi ir t.t. Matome, kad rodyklė atitinka horizontalų žirgo ėjimą, o
    %vertikaliu žirgo ėjimu iš rodyklės smaigalio visada atsiduriama rodyklės
    %pradžioje. Žaidėjui $A$ tereikia žirgą pastatyti rodyklės pradžioje ir
    %paeiti į smaigalį. Tada $B$ būtinai paeis į kitos rodyklės pradžią ir $A$ galės
    %paeiti į rodyklės smaigalį.
    %
    %\emph{Antras sprendimas} Susižymėkime lentelės langelius kaip kordinates $(x,y)$, kur $x$, $y$ yra
    %teigiami sveikieji. Tarkime, kad žirgo pastatymas $(1,1)$ langelyje ir
    %paėjimas į langelį $(3,2)$ įstumia $A$ į pralaiminčią poziciją (kitu atveju
    %įrodymas jau yra baigtas). Tada $B$ savo ėjimu peina į langelį $(X,Y)$ taip,
    %kad $A$ vėl atsidurtų pralaiminčioje pozicijoje. Pastebime, kad jei $A$ pirmu
    %ėjimu pastato žirgą į $(2,3)$, tada ėjimas į $(Y,X)$ garantuoja $A$ pergalę.
    %Dabartinė situacija nuo pirmosios skiriasi tik tuo, kad žirgas nepabuvojo
    %langelyje $(1,1)$. Tačiau šis langelis yra nepasiekiamas $B$, tad tai nedaro įtakos baigčiai.

  \item \text{[Tournament of Towns 2009]} Du žaidėjai paeiliui spalvina po
    $N$ taškų ant apskritimo. Pirmojo spalva raudona, antrojo – mėlyna.
    Spalvinti to paties taško negalima. Žaidimo pabaigoje gaunamas
    apskritimas padalintas į $2N$ lankų. Randamas ilgiausias lankas, kurio
    abu galai nuspalvinti ta pačia spalva. Žaidimą laimi šios spalvos
    savininkas. Ar kuris nors žaidėjas turi laiminčiąją strategiją su visais
    $N>1$? 
    %Atveju $N=2$ antrajam žaidėjui pakanka nuspalvinti tašką simetrišką
    %raudonajam centro atžvilgiu. Kad ir kokį didelį lanką atsiriektų pirmasis
    %žaidėjas antrojo ėjimo metu, antrasis visada galės atriekti didesnį (taškų
    %ant pasirinkto apskritimo lanko yra be galo daug). Nagrinėdami atvejį
    %$N=3$ vėl bandome spalvinti taškus simetriškai centro atžvilgiu, bet
    %pastebime, kad tai nieko gero neduoda. Galimų strategijų skaičius nėra jau
    %toks didelis ir įgudusi akis greit pastebės, kad atveju $N=2$ pasiteisino
    %strategija spalvinti taisyklingojo dvikampio viršūnes. Tai praktiškai ir
    %yra visas uždavinio sprendimas.
    %
    %Antrasis žaidėjas tol spalvina taisyklingojo $N$-kampio, kurio viršūnė yra
    %pirmasis raudonas taškas, viršūnes, kol gali. Jis nuspalvina $a$ viršūnių.
    %$N$-kampis yra suskirstytas bent į $N$ lankų, vadinsime šiuos lankus
    %pagrindiniais. Yra nedaugiau negu $N-a-1$ pagrindinių lankų, kurių abu
    %galai yra raudoni ir pirmasis žaidėjas gali visuose juose nuspalvinti po
    %tašką ir jam dar lieka vienas ėjimas. Jei jam lieka daugiau ėjimų, tai jis
    %spalvina taškus lankuose, kurių abu galai raudoni, kol lieka vienintelis.
    %Taip ilgiausias antrojo žaidėjo lankas bus tikrai trumpesnis už
    %pagrindinį. Kai visos $N$-kampio viršūnės nuspalvinamos, yra bent $a+1$
    %lankų, kurių nors vienas galas yra mėlynas; vadinsime šiuos lankus
    %melsvais. Pirmasis žaidėjas jau atliko bent $N-a$ ėjimų (nuspalvino $N-a$
    %taisyklingojo $N$-kampio viršūnių), tad jam liko ne daugiau $a$ ėjimų ir jis
    %negali sudarkyti visų melsvų lankų. Prieš paskutinį ėjimą tikrai nėra nė
    %vieno pagrindinio lanko, kurio abu galai raudoni ir yra nors vienas
    %melsvas lankas. Antrasis žaidėjas gali užsitikrinti lanką mėlynais galais,
    %kurio ilgis kaip norima artimas pagrindinio lanko ilgiui. Šis lankas bus
    %tikrai ilgesnis už ilgiausią raudoną lanką. Antrasis žaidėjas turi
    %laiminčiąją strategiją.

  \item \text{[IMO shortlist 1991]} $A$ ir $B$ žaidžia žaidimą. Kiekvienas
    užrašo po sveiką teigiamą skaičių ir duoda jį teisėjui. Teisėjas lentoje
    užrašo du skaičius, vienas jų yra žaidėjų skaičių suma. Tada teisėjas
    klausia $A$: „Ar žinai, kokį skaičių užrašė $B$?" Jei $A$ atsako
    neigiamai, tada teisėjas to paties klausia $B$ ir t.t. Tarkime, kad $A$
    ir $B$ yra baisiai protingi ir niekada nemeluoja. Įrodykite, kad šis
    žaidimas yra baigtinis.
    %Tegu $a$ ir $b$ yra $A$ ir $B$ skaičiai, o $x<y$ -- teisėjo skaičiai.
    %Tarkime, kad žaidimas begalinis. $A$ žino, kad $y\geq b\geq0$ ir sako
    %„ne". Kitu žingsniu $B$ suvokia, kad $A$ suprato, jog $y\geq b\geq0$,
    %tačiau, jei $a>x$, tada $A$ žinotų, kad $a+b=y$ ir pasakytų „taip", taigi
    %$B$ supranta, kad $x\geq a\geq0$ ir žaidimas tęsiasi. 
    %
    %Tarkime, kad $n$-tuoju žingsniu $A$ žino, jog $B$ suvokė, kad
    %$s_{n-1}\geq a\geq r_{n-1}$. Jei $b> x-r_{n-1}$, $B$ žinotų, kad $a+b>x$,
    %t.y. $a+b=y$.  Jei $b<y-s_{n-1}$, $B$ žinotų, kad $a+b<y$, t.y. $a+b=x$.
    %Abiem atvejais $B$	galėtų aptspėti $A$, bet jis pasako „ne", taigi
    %$x-r_{n-1}\geq b\geq y-s_{n-1}$. Dabar $r_{n}=y-s_{n-1}$ ir
    %$s_{n}=x-r_{n-1}$. Kitu žingsniu $B$ analogiškai suvokia, kad
    %$r_{n+1}=y-s_{n}$ ir $s_{n+1}=x-r_{n}$.  Pastebime, jog abiem atvejais
    %$s_{i+1}-r_{i+1}=s_{i}-r_{i}-(y-x)$. Kadangi $y-x>0$, tai egzistuoja $m$,
    %kuriam galioja $s_{m}-r_{m}<0$. Prieštara.

  \item \text{[IMO shortlist 2004]} Duotas natūrinis $n>1$. Ant lentos užrašytas
    skaičius $k=2$, o du žaidėjai pakaitomis gali pakeisti $k$ į $2k$ arba $k+1$.
    Pralaimi tas, kuris užrašo ant lentos skaičių didesnį už $n$. Su kuriais $n$
    antrasis žaidėjas turi laiminčiąją strategiją?

    %$S_{n}$ vadinsime žaidimą, kuriame duotas skaičius yra $n$. $S_{2l+1}$ laimės
    %pirmasis žaidėjas visada keisdamas $k$ į $k+1$, tad nagrinėsime tik atvejį, kai $n$ yra lyginis.
    %Pirmasis žmogus parašęs lyginį skaičių didesnį už $\frac{n}{2}$ laimės, nes
    %niekas nebenorės dauginti iš dviejų. Jei $n$ yra dalus iš keturių, tai
    %pralaimi pirmasis žmogus parašęs didesnį skaičių už $\frac{n}{4}$, nes tas
    %skaičius bus mažesnis už $\frac{n}{2}$, o priešininkas galės jį padauginti iš
    %dviejų ir taip garantuoti sau pergalę. Vadinasi žaidimą $S_{4l}$ laimės tas
    %pats žaidėjas kaip ir $S_{l}$. Analogiškai samprotaudami atveju, kai
    %$n$ nėra dalus iš keturių, gauname, kad ir žaidimų $S_{4l+2}$ ir
    %$S_{l}$ laimėtojai sutaps. 
    %
    %Taigi, turimam lyginiam $n$ norėdami išsiaiškinti, kuris žaidėjas laimės, mes
    %atliekame šį algoritmą -- jei skaičius dalus iš keturių, tai padaliname, o
    %jei ne, tai daliname iš dviejų, atimame vienetą ir dar kartelį padaliname iš
    %dviejų. Jei taip tęsdami gausime nelyginį skaičių, tai antrasis
    %žaidėjas pralaimės. O jei ne, tai
    %algoritmas sustos ties skaičiumi 2, o tai reiškia, kad žaidimą laimi antrasis
    %žaidėjas. Kaip tai užrašyti tvarkingai? Jei jau dauginame skaičių iš keturių
    %tai ketvirtainėje sistemoje prie jo uodegos prirašome $0$, jei dauginame iš
    %$4$ ir pridedame $2$, tai prie uodegos priduriame $2$. Startuojame su
    %$2$, vadinasi antrasis žaidėjas laimės tuos ir tik tuos žaidimus, kuriuose
    %$n$ ketvirtainėje išraiškoje bus išreiškiamas vien tik $2$ ir $0$.

\item \text{Misere NIM} Žaidžiamas NIM, bet pralaimi tas, kuris atlieka paskutinį ėjimą. Kaip žaisti turint vieną, dvi, n krūvelių?

%Jei turime vieną krūvelę ir joje yra vienas akmenukas, tai pirmasis žaidėjas turės jį nuimti ir pralaimės. Jei akmenukų daugiau, tai jis galės laimėti žaidimą nuimdamas visus išskyrus vieną akmenuką. Žaidžiame su dviem krūvelėmis. (0,0) yra laiminti pozicija, 
%(0,1) pralaiminti, (0,n+1) - laiminti, (1,1) - laiminti, (2,2) - pralaiminti. Užtenka perrinkti dar keletą variantų ir pastebime, kad visos pozicijos$(n,n)$, kur $n$ daugiau už $1$ matyt bus pralaiminčios, tarkime žaidimas prasideda tokioje pozicijoje. Tada antrasis 
%žaidėjas gali atlikinėti simetriškus žaidimus tol, kol pirmasis vienoje iš krūvelių padarys 0 arba 1 akmenuką. Abiem atvejais antrasis galės ant stalo palikti tik vieną akmenuką ir taip laimėti žaidimą. Bendru atveju žaidžiama labai panašiai. Matome, kad čia 
%svarbiausios yra vienetinės krūvelės (turinčios vieną akmenuką). Žaidimas žaidžiamas lygiai taip pat kaip normalus NIM iki to momento, kai laiminčiojo žaidėjo ėjimas gali ant stalo palikti tik nelyginį skaičių vienetinių krūvelių (jokių kitų), tada jis atlieka šį ėjimą ir %laimi žaidimą. 

  \item $A$ ir $B$ pakaitomis keičia tritaškius $x^{10}+\dots x^9+\dots x^8+\dots
    x^7+\dots x^6+\dots x^5+\dots x^4+\dots x^3+\dots x^2+\dots x+1=0$ į
    realiuosius skaičius. Jei žaidimo pabaigoje daugianaris turi nors vieną
    realiąją šaknį, laimi $B$. Ar gali $B$ laimėti?
    %Taip gali. $P(x)$ yra daugianaris žaidimo pabaigoje. Prieš paskutinį $B$
    %ėjimą turime daugianarį $F(x)$. Žaidėjas $B$ gali užsitikrinti, kad $A$
    %paskutiniu ėjimu keis tritaškį prie nelyginio laipsnio. Tada
    %$P(x)=F(x)+ax^m+bx^{2p+1}$. $P(-2)=F(-2)+a(-2)^m-b2^{2p+1}$,
    %$cP(1)=cF(1)+ca+cb$. Jei $c=2^{2p+1}$, gauname
    %$2^{2p+1}P(1)+P(-2)=2^{2p+1}F(1)+F(-2)+2^{2p+1}a+a(-2)^m$. Jei
    %$2^{2p+1}P(1)+P(-2)=0$, tai $P(x)$ tikrai turės realią šaknį tarp $1$ ir
    %$-2$.  $2^{2p+1}F(1)+F(-2)+2^{2p+1}a+a(-2)^m=0$, tada
    %$a=\frac{-cF(1)-f(-2)}{c+(-2)^m}$. Paskutiniu ėjimu $B$ tereikia parašyti
    %$a$ taip, kad $A$ reiktų rašyti koeficientą prie nelyginio laipsnio. Tada
    %$P(x)$ turės šaknį tarp $1$ ir $-2$.

  \item \text{[Kvant 1987]} Žaidimo erdvė yra begalinė plokštuma. $A$ savo
    ėjimu nuspalvina vieną tašką raudonai, o $B$ $k$ taškų mėlynai. $A$
    laimi, jei po jo ėjimo plokštumoje atsiranda kvadratas, kurio kraštinės
    lygiagrečios ašims ir visos jo viršūnės raudonos. Ėjimai atliekami
    pakaitomis. Ar $A$ gali laimėti, kai $k=1$? $k=2$? $k$ – jūsų
    mėgstamiausias natūralusis skaičius?
    %Kai $k=1$, žaidėjui $A$ tereikia nuspalvinti tris taškus esančius vienoje
    %tiesėjė lygiagrečioje ašims taip, kad vienas gulėtų lygiai per vidurį tarp
    %kitų dviejų, nutolęs nuo jų atstumu $X$ ir, trys taškai, nutolę nuo pirmųjų
    %trijų atstumu $X$ vertikaliai į viršų arbą į apačią, būtų laisvi. Pabandžius
    %nesunku įsitikinti, kad tai įmanoma ir tai pasiekus $A$ lengvai gali
    %laimėti. 
    %
    %Bandydami atvejį $k=2$ pastebime, kad plokštumos begalinumas sprendžiant
    %šį uždavinį yra kertinis faktorius. Kuo daugiau $A$ nuspalvina taškų, tuo
    %daugiau galimų kvadratų turi užblokuoti $B$. Čia ir atsiranda nuojauta, kad
    %pirmasis žaidėjas gali laimėti su bet kokiu $k$.
    %
    %Įrodinėdami uždavinį pasinaudosime keletu paprastų faktų:
    %
    %$(1)$ $A$ gali nuspalvinti kaip nori daug taškų vienoje tiesėje, nes taškų
    %skaičius begalinis.\\
    %$(2)$ $A$ visada suras tuščią tiesę lygiagrečią ašims, kurioje nėra
    %nuspalvintas dar nė vienas taškas, nes tiesių skaičius begalinis.
    %
    %Pirmasis žaidėjas nuspalvina $Z$ taškų $x$ ašyje ir brėžia per kiekvieną
    %tašką tiesę lygiagrečią ašiai $y$ (vadinsime šias tieses statiniais). Tada
    %susiranda tuščią tiesę lygiagrečią $x$ ašiai ir spalvina šios tiesės
    %sankirtas su statinėmis. $A$ naujojoje tiesėje nuspalvins ne mažiau negu $
    %\frac{N}{Z+1} $ sankirtų. Kitu žingsniu $A$ nutrina visus statinius,
    %kurių sankirtų šioje tiesėje nenuspalvino. $A$ tęsia žaidimą išsirinkdamas
    %tuščią tiesę, nuspalvindamas sankirtas ir nutrindamas nepanaudotus
    %statinius. Pastebime, kad statiniai su pasirinktomis tiesėmis sudaro
    %stačiakampę gardelę, kurios visos sankirtos nuspalvintos raudonai.
    %Pasirinkdamas pakankamai didelį $Z$, $A$ gali gauti tokią gardelę  $ a\times b
    %$, kokios tik užsigeidžia. 
    %
    %Nuspalvinęs pakankamai didelę gardelę (pakankamumo sąlygos radimą
    %paliksime skaitytojui), žaidėjas $A$ spalvina $x$ ašyje tašką $Q$ ir brėžia per
    %jį tiesę $d$ sudarančią $45\,^{\circ}$  kampą su $x$ ašimi taip, kad visi
    %nuspalvintieji taškai gulėtų kairiau šios tiesės.
    %
    %Prasitęsiame $a$ gardelės horizontalių tiesių ir spalviname šių tiesių
    %sankirtas su $d$. $A$ galės nuspalvinti bent $ \frac{a}{k+1} $ sankirtų
    %$(1)$.  Po šių  $ \frac{a}{k+1} $ ėjimų liks bent $b-a$ nenuspalvintų
    %sankirtų tarp $b$ pratęstų gardelės vertikalių  ir tiesės $d$, $A$ gali
    %nuspalvinti bent jau $ \frac{b-a}{k+1} $ šių sankirtų $(2)$. 
    %
    %Dabar nagrinėsime $r= \frac{a}{k+1} $ horizontalių tiesių, kurios kerta
    %$d$ raudonuose taškuose $(1)$ ir $s= \frac{b-a}{k+1} $ vertikalių tiesių,
    %kurios kerta $d$ raudonuose taškuose $(2)$. Pastebime, kad bet kuriems $2$
    %raudoniems taškams iš $(1)$ ir $(2)$ gardelėje atsiras jau nuspalvintas
    %raudonai taškas, kuris su jais sudaro tris kvadrato, kurio kraštinės
    %lygiagrečios ašims, viršūnes. $A$ gali pasirinkti  $ r\times s $ skirtingų
    %kvadratų, kurių tris viršūnes jau yra nuspalvinęs. Jam lieka nuspalvinti
    %vieną iš  $  r\times s $ taškų dešiniau linijos $d$ ir taip laimėti
    %žaidimą. Parodysime, kad jis visada galės tai padaryti.
    %
    %Nuo $d$ linijos nubrėžimo $B$ nuspalvino nedaugiau nei $b$ taškų iš
    %nagrinėjamų $ r\times s $. Taigi $A$ tereikia pasirinkti tokius $a$ ir
    %$b$, kad $a-b$ bei $b$ būtų pakankamai dideli, $ r\times s $ $r\times s >
    %b$. ($r,s$ išreikškiamii per $a,b,k$ ir nesunku apskaičiuoti kiek $b$ turi
    %būti didesnis už $a$). Kadangi žaidimo pradžioje $A$ gali spalvinti tiek
    %taškų, kiek tik širdis geidžia, tad tikrai galės pasirinkti pakankamus $a$
    %ir $b$. Patariame skaitytojui pačiam išsiaiškinti, kokie gi $a$ ir $b$ yra
    %pakankami.
    %
    %Uždavinys gracingai neigia nusistovėjusias normas. Vienas begaliniame
    %lauke -- puikiausiais karys.

\end{enumerate}

